<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://til.chekos.dev/static/img/icon.png><title>how to execute a shell script in the current shell | chekos' today i learned</title><meta name=title content="how to execute a shell script in the current shell"><meta name=description content="what i learned when you execute a shell script, it defaults to creating a new shell, executing the script in that shell and closing it. if you want to, for example, set environmental variables you would need to run the script in the current shell. let&rsquo;s say you want to have a short shell script that sets the database url as an environmental variable called env_vars.sh.
#!/bin/bash export DATABASE_URL=&#34;super_secret_url&#34; if you run"><meta name=keywords content="shell,"><meta property="og:title" content="how to execute a shell script in the current shell"><meta property="og:description" content="what i learned when you execute a shell script, it defaults to creating a new shell, executing the script in that shell and closing it. if you want to, for example, set environmental variables you would need to run the script in the current shell. let&rsquo;s say you want to have a short shell script that sets the database url as an environmental variable called env_vars.sh.
#!/bin/bash export DATABASE_URL=&#34;super_secret_url&#34; if you run"><meta property="og:type" content="article"><meta property="og:url" content="https://til.chekos.dev/2021/09/09/how-to-execute-a-shell-script-in-the-current-shell/"><meta property="og:image" content="http://til.chekos.dev/img/logo.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-09-09T00:00:00+00:00"><meta property="article:modified_time" content="2021-09-09T00:00:00+00:00"><meta property="og:site_name" content="chekos' today i learned"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://til.chekos.dev/img/logo.png"><meta name=twitter:title content="how to execute a shell script in the current shell"><meta name=twitter:description content="what i learned when you execute a shell script, it defaults to creating a new shell, executing the script in that shell and closing it. if you want to, for example, set environmental variables you would need to run the script in the current shell. let&rsquo;s say you want to have a short shell script that sets the database url as an environmental variable called env_vars.sh.
#!/bin/bash export DATABASE_URL=&#34;super_secret_url&#34; if you run"><meta name=twitter:site content="@ChekosWH"><meta itemprop=name content="how to execute a shell script in the current shell"><meta itemprop=description content="what i learned when you execute a shell script, it defaults to creating a new shell, executing the script in that shell and closing it. if you want to, for example, set environmental variables you would need to run the script in the current shell. let&rsquo;s say you want to have a short shell script that sets the database url as an environmental variable called env_vars.sh.
#!/bin/bash export DATABASE_URL=&#34;super_secret_url&#34; if you run"><meta itemprop=datePublished content="2021-09-09T00:00:00+00:00"><meta itemprop=dateModified content="2021-09-09T00:00:00+00:00"><meta itemprop=wordCount content="196"><meta itemprop=image content="http://til.chekos.dev/img/logo.png"><meta itemprop=keywords content="shell,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><style type=text/css>h2{color:#ff1a75;size:5px}</style></head><body><header><a href=/ class=title><h2>chekos' today i learned</h2></a><nav><a href=/>til</a>
<a href=/about>about</a>
<a href=https://chekos.dev/>chekos.dev</a></nav></header><main><h1>how to execute a shell script in the current shell</h1><p><i><time datetime=2021-09-09 pubdate>2021-09-09</time></i></p><content><h2 id=what-i-learned>what i learned</h2><p>when you execute a shell script, it defaults to creating a new shell, executing the script in that shell and closing it. if you want to, for example, set environmental variables you would need to run the script in the current shell.
let&rsquo;s say you want to have a short shell script that sets the database url as an environmental variable called <code>env_vars.sh</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>export DATABASE_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;super_secret_url&#34;</span>
</span></span></code></pre></div><p>if you run</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sh env_vars.sh
</span></span></code></pre></div><p>in your terminal, it would run said script in a new shell and therefore those environmental variables would not be set in your current shell and would then be unavailable to your other scripts.</p><p>to run that in your current shell you use the following syntax</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>. ./env_vars.sh
</span></span></code></pre></div><p>this way your environmental variables are set in your current shell and you can use them as expected.</p><h2 id=how-i-learned>how i learned</h2><p>i&rsquo;m testing <code>SQLModel</code> and wanted to test access to snowflake. instead of setting the environmental variables manually i thought i&rsquo;d just run a script that had <code>export snowflake_username="xyz"</code> etc, etc.
however, when i ran the script and tried to use <code>os.environ['snowflake_username']</code> i&rsquo;d get an error.</p><p>finding the solution was surprisingly fast.</p><h3 id=visit>visit</h3><p><a href=https://stackoverflow.com/questions/496702/can-a-shell-script-set-environment-variables-of-the-calling-shell>https://stackoverflow.com/questions/496702/can-a-shell-script-set-environment-variables-of-the-calling-shell</a></p></content><p><a href=https://til.chekos.dev/tags/shell/>#shell</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>